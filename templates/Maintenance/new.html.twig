{% extends 'base_admin.html.twig' %}

{% block pageTitle %}Add Car{% endblock %}

{% block pageBody %}
    <div class="row">
        <label for="btnSelectMake" > Make </label>
        <select class="form-select form-select-lg mb-3" id="SelectMakeChoice"></select>

        {#<div class="col-md-5">
            <label for="" class="form-label">Address</label>
            <input type="text" class="form-control">
        </div>#}
    </div>
{% endblock %}

{% block additionalJavascript %}
    <script>
            document.addEventListener('DOMContentLoaded', () => {
            fetchCarMakes();
        });

            async function fetchCarMakes() {
                try {
                    const response = await fetch( 'https://carapi.app/api/makes?sort=%3Cstring%3E', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }

                    });
                    console.log(response);

                    if (!response.ok) {
                        throw new Error("HTTP status " + response.status + ": " + response.statusText);
                    }

                    const carMakes = await response.json();
                    populateCarMakesDropdown(carMakes);
                } catch (error) {
                    console.error("Error fetching car makes:", error);
                }

                function populateCarMakesDropdown(carMakes) {
                    const selectMakeChoice = document.getElementById('SelectMakeChoice');
                    selectMakeChoice.innerHTML = ''; // Clear any existing options

                    carMakes.forEach(make => {
                        const option = document.createElement('option');
                        option.value = make.name; // Assuming the API response includes 'name'
                        option.textContent = make.name;
                        selectMakeChoice.appendChild(option);
                    });
                }
            }

    </script>
{% endblock %}

